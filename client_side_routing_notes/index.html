<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Wikismith">

    <title>
      Client Side Routing Notes
    </title>

    <!-- bower:css -->
    <link rel="stylesheet" href="/bs3/bower/css/bootstrap.css">
    <!-- endinject -->

    <!-- inject:css -->
    <link rel="stylesheet" href="/bs3/css/blog.css">
    <link rel="stylesheet" href="/bs3/css/docs.min.css">
    <link rel="stylesheet" href="/bs3/css/railscasts.css">
    <!-- endinject -->

    <!--[if lt IE 9]><script src="../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../assets/js/ie10-viewport-bug-workaround.js"></script>
    <script src="../assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png">
    <link rel="icon" href="/favicon.ico">


</head>
<body>
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

<!-- Docs master nav -->
<header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a href="../../../" class="navbar-brand">
              <img src="http://www.gravatar.com/avatar/91f491389b01231140190aef863408c9.png">
              &nbsp;
              jrhicks.github.io
            </a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <!--
            <ul class="nav navbar-nav">
                <li>
                    <a href="/interests.html">Interest</a>
                </li>
                <li>
                    <a href="/projects">Projects</a>
                </li>
                <li>
                    <a href="/about">Speaking</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://blog.getbootstrap.com" onclick="ga('send', 'event', 'Navbar', 'Community links', 'Blog');">About</a></li>
            </ul>
            -->
        </nav>
    </div>
</header>



<!-- Docs page layout -->
<div class="bs-docs-header" id="content">
    <div class="container">
        <h1>Client Side Routing Notes</h1>
        <p>Navigating Screens and Data In A React Flux App</p>
    </div>
</div>

<div class="container bs-docs-container">

<div class="row">
<div class="col-md-9" role="main">


<div class="alert alert-success" role="alert">Want to help improve this article? <a href="https://github.com/jrhicks/jrhicks.github.source/edit/master/pages/client_side_routing_notes/index.md">Edit it</a></div>

<!-- h1 --><h1 class="page-header" id="md-introduction">Introduction</h1><p><a href="http://conf.reactjs.com/schedule.html#react-router-increases-your-productivity">React Router Increases Your Productivity</a> - 32 Minute Video - Jan 28th, 2015 at React.js Conf</p>
<p>Concepts</p>
<ul>
<li><p>&quot;Screen Creation Productivity&quot;</p>
</li>
<li><p>Flows - &quot;Flows are just as important to good interfaces as individual screens are&quot; - Ryan Singer, Basecamp</p>
</li>
<li><p>&quot;If your user interface is nested then your routes should be nested&quot;</p>
</li>
<li><p>&quot;Cool URIs don&#39;t change&quot; Time Berner Lees</p>
</li>
<li><p>Working URLS are a core to Web Applications</p>
</li>
</ul>
<!-- h1 --><h1 class="page-header" id="md-basic-examples">Basic Examples</h1><pre><code><span class="hljs-tag">&lt;<span class="hljs-title">Route</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{App}</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">"/"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">DefaultRoute</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{Home}</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Route</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"about"</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{About}</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Route</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"users"</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{Users}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Route</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"recent-users"</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">"recent"</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{RecentUsers}</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Route</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"user"</span> <span class="hljs-attribute">path</span>=<span class="hljs-value">"/user/:userId"</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{User}</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">NotFoundRoute</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{UserRouteNotFound}</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">Route</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">NotFoundRoute</span> <span class="hljs-attribute">handler</span>=<span class="hljs-value">{NotFound}</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Redirect</span> <span class="hljs-attribute">from</span>=<span class="hljs-value">"company"</span> <span class="hljs-attribute">to</span>=<span class="hljs-value">"about"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Route</span>&gt;</span>
</code></pre><!-- h1 --><h1 class="page-header" id="md-route-store">Route Store</h1><p><a href="https://github.com/rackt/react-router/blob/master/docs/guides/flux.md">Guide to React Router in a Flux App</a></p>
<p>You can create your own RouterStore and fire an action in run callback:</p>
<pre><code>Router.run(routes, <span class="hljs-function"><span class="hljs-params">(Handler, state)</span> =&gt;</span> {
  ActionCreators.changeRoute({ state });
  React.render(&lt;Handler/&gt;, <span class="hljs-built_in">document</span>.body);
});
</code></pre><p>Let RouterStore keep router state and add a public method to obtain it.
This way your action creators and other stores can learn about current router state.</p>
<!-- h1 --><h1 class="page-header" id="md-alt-example">Alt Example</h1><p>In case you like <a href="https://github.com/goatslacker/alt">alt</a> like me.  Here is a <a href="https://github.com/lostpebble/alt-react-router-example">alt-react-router-example</a> - An example project showing a way to use React-Router (and async calls) with the Flux implementation, Alt.</p>
<!-- h1 --><h1 class="page-header" id="md-content-stores">Content Stores</h1><p>Dan Abramov introduces the concept of Content Stores in his <a href="https://github.com/gaearon/flux-react-router-example">Flux React Router Example</a></p>
<p>As users navigate screens they are also navigating through your
applications data and triggering server actions to fetch fresh
data.  In the ContentStore pattern, ContentStores <em>harvest their objects from all server actions</em>.  </p>
<p>Imagine that each server response had an &#39;entities&#39; attribute and
any returned data was in it.  Then each ContentStore could look
in the entities from the response and see if there were any new
data for itself.  In this code snippet from <a href="https://github.com/gaearon/flux-react-router-example/blob/master/scripts/stores/UserStore.js">UserStore.js</a>, the User Store inspects
the response for any new user entities and merges them in if found.</p>
<pre><code>UserStore.dispatchToken = AppDispatcher.register(<span class="hljs-keyword">function</span> (payload) {
  <span class="hljs-keyword">const</span> { <span class="hljs-built_in">response</span> } = payload.action;
  <span class="hljs-keyword">const</span> entities = <span class="hljs-built_in">response</span> &amp;&amp; <span class="hljs-built_in">response</span>.entities;
  <span class="hljs-keyword">const</span> fetchedUsers = entities &amp;&amp; entities.users;

  <span class="hljs-keyword">if</span> (fetchedUsers) {
    mergeIntoBag(_users, fetchedUsers);
    UserStore.emitChange();
  }
});
</code></pre><!-- h1 --><h1 class="page-header" id="md-relay-and-graphql">Relay and GraphQL</h1><p><a href="https://facebook.github.io/react/blog/2015/02/20/introducing-relay-and-graphql.html">Introducing Relay and GraphQL</a> 26 minutes - Greg Hurrell - 2015/02/02</p>
<p>Relay and GraphQL are less concerned with offline date and more
interested in decoupling the server and the UI.  With GraphQL
each component can register their complex data needs (data and summary)
and top level components can compose these together and send them
to a generic server endpoint.</p>
<p>&quot;We need a way for each component to staticly define its data needs&quot;.
Stop writing dedicated endpoints.</p>
<p><img src="relay1.png" width="100%"></p>
<p><img src="relay2.png" width="100%"></p>
<p>&quot;We want to specify the data need in <em>statics</em> so we can access them <em>without</em> instantiating the component&quot;</p>
<p><img src="relay3.png" width="100%"></p>
<p>The top level component can compose the queries of its children.</p>
<p><img src="composition.png" width="100%"></p>
<!-- h1 --><h1 class="page-header" id="md-offline-partitions-store">Offline Partitions Store</h1><p>The offline partitions store approach is a strategy to register
partitions of data you want to store offline and synchronize with a
server as available.</p>
<p>Each partition would keep track of its sync status and some basic info to help
remove itself should space become limited on the front end.</p>
<p>Consider the following schema for a project management application.</p>
<p><img src="schema.png"></p>
<p>When the user navigates into a project 12312 the following actions get fired:</p>
<pre><code>  ensurePartition({ <span class="hljs-string">entity:</span> <span class="hljs-string">'files'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}});
  ensurePartition({ <span class="hljs-string">entity:</span> <span class="hljs-string">'members'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}});
  ensurePartition({ <span class="hljs-string">entity:</span> <span class="hljs-string">'notes'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}});
  ensurePartition({ <span class="hljs-string">entity:</span> <span class="hljs-string">'tasks'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}});
</code></pre><p>The OfflinePartitionStore would handle ensurePartition by either updating
the lastEnsured timestamp or appending an empty (unsynced) partition.</p>
<p>Assuming this app has no previous data, these actions would fill the OfflineParitionStore with a bunch of empty partitions, the end product would resemble something like this:</p>
<pre><code>paritions = [
  {
<span class="hljs-label">    partition:</span> { <span class="hljs-string">entity:</span> <span class="hljs-string">'files'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}},
<span class="hljs-label">    lastEnsured:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    lastSync:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    lastUpdatedCursor:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    cursorAtEnd:</span> <span class="hljs-literal">false</span>,
<span class="hljs-label">    records:</span> [],
<span class="hljs-label">    conflicts:</span> [],
<span class="hljs-label">    localChanges:</span> []
  },
  {
<span class="hljs-label">    partition:</span> { <span class="hljs-string">entity:</span> <span class="hljs-string">'members'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}},
<span class="hljs-label">    lastEnsured:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    lastSync:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    lastUpdatedCursor:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    cursorAtEnd:</span> <span class="hljs-literal">false</span>,
<span class="hljs-label">    records:</span> [],
<span class="hljs-label">    conflicts:</span> [],
<span class="hljs-label">    localChanges:</span> []
  },
  {
<span class="hljs-label">    partition:</span> { <span class="hljs-string">entity:</span> <span class="hljs-string">'notes'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}},
<span class="hljs-label">    lastEnsured:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    lastSync:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    lastUpdatedCursor:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    cursorAtEnd:</span> <span class="hljs-literal">false</span>,
<span class="hljs-label">    records:</span> [],
<span class="hljs-label">    conflicts:</span> [],
<span class="hljs-label">    localChanges:</span> []
  },
  {
<span class="hljs-label">    partition:</span> { <span class="hljs-string">entity:</span> <span class="hljs-string">'tasks'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}},
<span class="hljs-label">    lastEnsured:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    lastSync:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    lastUpdatedCursor:</span> <span class="hljs-literal">null</span>,
<span class="hljs-label">    cursorAtEnd:</span> <span class="hljs-literal">false</span>,
<span class="hljs-label">    records:</span> [],
<span class="hljs-label">    conflicts:</span> [],
<span class="hljs-label">    localChanges:</span> []
  }
]
</code></pre><p>At this point an OfflinePartitionSyncUtil would attempt to download the data sorted by <strong>updated_at ascending</strong>.  It hits a generic server endpoint and passes its partition params
and lastUpdatedCursor to the server.  The server would respond with the next page of records
and an indication if this was all that remains.</p>
<p>Lets focus in on what the notes partition might look like once all data from the server was downloaded and we have all 3 notes in the store.</p>
<pre><code>partitions = [
  {
<span class="hljs-label">    partition:</span> {<span class="hljs-string">entity:</span> <span class="hljs-string">'notes'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}},
<span class="hljs-label">    lastUpdatedCursor:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    cursorAtEnd:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    lastEnsured:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    localChanges:</span> [],
<span class="hljs-label">    conflicts:</span> [],
<span class="hljs-label">    records:</span> {
<span class="hljs-label">      4545:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Lili'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Good Morning'</span>},
      },
<span class="hljs-label">      8723:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'John'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Good Bye'</span>},
      }
<span class="hljs-label">      3232:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Jeff'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Hello'</span>},
      }
    }
  }
]
</code></pre><p>After a user on the front end makes an edit to 8723 we will want to catalog the update
and keep a copy of the original value.  This original value will come in handy later
when we want to ensure that we can unambigiously merge the data with the server.  Lets say
two notes have been edited since we&#39;ve been offline.</p>
<pre><code>partitions = [
  {
<span class="hljs-label">    partition:</span> {<span class="hljs-string">entity:</span> <span class="hljs-string">'notes'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}},
<span class="hljs-label">    lastUpdatedCursor:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    cursorAtEnd:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    lastEnsured:</span> <span class="hljs-string">'2015/03/14 9:26'</span>,
<span class="hljs-label">    localChanges:</span> [<span class="hljs-number">8723</span>, <span class="hljs-number">3232</span>],
<span class="hljs-label">    conflicts:</span> [],
<span class="hljs-label">    records:</span> {
<span class="hljs-label">      4545:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Lili'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Good Morning'</span>},
      },
<span class="hljs-label">      8723:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'John'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Good Bye Friends'</span>},
<span class="hljs-label">        original:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'John'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Good Bye'</span>},
      }
<span class="hljs-label">      3232:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Jeff'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Hello Friends'</span>},
<span class="hljs-label">        original:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Jeff'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Hello'</span>},
      }
    }
  }
]
</code></pre><p>OfflinePartitionSyncUtil will sweep through the partitions and notice 2 local changes and
attempt to send these changes to the server.  The server will receive the new data and the
original data so that it can determine if both it and the client tried to change the same
attribute.  </p>
<p>In this hypothetical situation, lets assume that 8723 was successful, and 3232
failed.  Our new store might look like:</p>
<ul>
<li><p>8723 is removed from localChanges and its original data was pruned</p>
</li>
<li><p>3232 is added to conflicts and its record is decorated with details</p>
</li>
</ul>
<pre><code>partitions = [
  {
<span class="hljs-label">    partition:</span> {<span class="hljs-string">entity:</span> <span class="hljs-string">'notes'</span>, <span class="hljs-string">filter:</span> {<span class="hljs-string">projectId:</span> <span class="hljs-number">12312</span>, <span class="hljs-string">userId:</span> <span class="hljs-number">23</span>}},
<span class="hljs-label">    lastUpdatedCursor:</span> <span class="hljs-string">'2015/03/14 9:30'</span>,
<span class="hljs-label">    cursorAtEnd:</span> <span class="hljs-literal">true</span>,
<span class="hljs-label">    lastEnsured:</span> <span class="hljs-string">'2015/03/14 9:30'</span>,
<span class="hljs-label">    localChanges:</span> [<span class="hljs-number">3232</span>],
<span class="hljs-label">    conflicts:</span> [<span class="hljs-number">3232</span>],
<span class="hljs-label">    records:</span> {
<span class="hljs-label">      4545:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Lili'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Good Morning'</span>},
      },
<span class="hljs-label">      8723:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'John'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Good Bye Friends'</span>},
      }
<span class="hljs-label">      3232:</span> {
<span class="hljs-label">        data:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Jeff'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Hello Friends'</span>},
<span class="hljs-label">        server:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Jeff'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Hello Everyone'</span>},
<span class="hljs-label">        original:</span> {<span class="hljs-string">name:</span> <span class="hljs-string">'Jeff'</span>, <span class="hljs-string">body:</span> <span class="hljs-string">'Hello'</span>},
<span class="hljs-label">        lastSyncAttempt:</span> <span class="hljs-string">'2015/03/14 12:23:23'</span>,
      }
    }
  }
]
</code></pre><p>A background action would work to keep these offline partitions in sync, simply updating the conflicts and sync status as needed.</p>
<p>If the user navigated to a different project, the notes store would create a new partition for the new projectId.  If space became limited on the front end, the stores could dispose of data from other partitions that was in sync.</p>
<p>Lets look closer to what this might look like as an <a href="https://github.com/goatslacker/alt">alt store</a></p>
<pre><code><span class="hljs-keyword">import</span> alt from <span class="hljs-string">'../alt'</span>;
<span class="hljs-keyword">import</span> PartitionActions from <span class="hljs-string">'../actions/PartitionActions'</span>;

<span class="hljs-keyword">class</span> PartitionedNotesStore {
  <span class="hljs-constructor"><span class="hljs-keyword">constructor</span>() </span>{
    <span class="hljs-keyword">this</span>.bindActions(PartitionActions);
    <span class="hljs-keyword">this</span>.partitions = [];
  }

  onEnsurePartition(partition) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.includes?(partition)) {
      <span class="hljs-keyword">this</span>.updateLastEnsured(partition);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">this</span>.createPartition( partition );
    }
  }

  onDownload(data) {
    <span class="hljs-keyword">let</span> {partition, lastUpdatedCursor, records} = data;
    <span class="hljs-comment">// update partition and merge records, flag and decorate conflicts</span>
  }

  onLocalUpdate(partition, record) {
    <span class="hljs-comment">// Update records</span>
  }

  onServerUpdateSuccess(parition, record) {
      <span class="hljs-comment">// Handle it</span>
  }

  onServerUpdateConflict(partition, record) {
    <span class="hljs-comment">// Handle it</span>
  }

}
</code></pre><!-- end -->
<hr>

<a href="https://twitter.com/share" class="twitter-share-button" data-via="jrhicks">Tweet</a>

<a href="https://twitter.com/jrhicks">Follow Jeffrey Hicks on Twitter</a></a>
<hr>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'jrhicksgithubio';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


</div>

<div class="col-md-3">
    <div class="bs-docs-sidebar hidden-print hidden-xs hidden-sm" role="complementary">

        <ul class="nav bs-docs-sidenav">
            
            
            
            <li><a href="#md-introduction">Introduction</a></li>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <li><a href="#md-basic-examples">Basic Examples</a></li>
            
          
            
            
          
            
            
            <li><a href="#md-route-store">Route Store</a></li>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <li><a href="#md-alt-example">Alt Example</a></li>
            
          
            
            
          
            
            
            <li><a href="#md-content-stores">Content Stores</a></li>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <li><a href="#md-relay-and-graphql">Relay and GraphQL</a></li>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
            <li><a href="#md-offline-partitions-store">Offline Partitions Store</a></li>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
        </ul>


    </div>
</div>
</div>
</div>

<!-- Footer
================================================== -->
<footer class="bs-docs-footer" role="contentinfo">
    <div class="container">
        <p>Generated with <a href="http://wikismith.com">Wikismith</a> - <a href="http://getbootstrap.com">Bootstrap 3</a> Theme
    </div>
</footer>

<!-- bower:js -->
<script src="/bs3/bower/js/jquery.js"></script>
<script src="/bs3/bower/js/bootstrap.js"></script>
<!-- endinject -->

<!-- inject:js -->
<script src="/bs3/js/docs.min.js"></script>
<!-- endinject -->


<!-- TWITTER Put this just before the closing body tag -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</body>
</html>
